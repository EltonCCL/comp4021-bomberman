<!DOCTYPE html>
<html>

<head>
    <title>Bomberman</title>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>

<body>
    <!-- Login Page -->
    <div class="page-container" id="login-page">
        <div class="login-section">
            <h1 class="form-title">Login</h1>
            <form id="login-form">
                <label for="username">Username</label>
                <input type="text" id="signin-username" name="username" required>
                <label for="password">Password</label>
                <input type="password" id="signin-password" name="password" required>
                <input type="submit" value="Login">
                <div id="signin-message" class="warning center"></div>
            </form>
        </div>

        <div class="register-section">
            <h1 class="form-title">Register</h1>
            <form id="reg-form">
                <label for="reg-username">Username</label>
                <input type="text" id="reg-username" name="reg-username" required>
                <label for="reg-password">Password</label>
                <input type="password" id="reg-password" name="reg-password" required>
                <label for="confirm-password">Confirm Password</label>
                <input type="password" id="confirm-password" name="confirm-password" required>
                <input type="submit" value="Register">
                <div id="register-message" class="warning center"></div>
            </form>
        </div>
    </div>
    <!-- Start Page -->
    <div class="page-container" id="start-page">
        <h1 class="start-page-title">Bomberman Game</h1>
        <h2 class="start-page-button" id="login">Click Here to Login In</h2>
        <h2 class="start-page-button" id="instructions">Click Here to Check Instructions</h2>
    </div>
    <!-- Game Page -->
    <div class="page-containter" id="game-page">
        <div class="game-screen">
            <div id="area">
                <div id="container">
                    <canvas id="game-canvas" width="1050px" height="550px"></canvas>
                </div>
            </div>
        </div>
        <div id="playerBorad" style="color: white;">
        </div>
    </div>
    <!-- Game end screen -->
    <div class="game-end-screen" id="game-end-screen">
        <h1 class="win-message" id="is-winner">You Win!</h1>
        <div class="line" id="line1"></div>
        <div class="game-end-wrapper">
            <div class="game-end-table" id="game-stat">
                <h3>Game Statistics</h3>
                <div id="game-stat-text"></div>
            </div>
            <div class="game-end-table" id="end-game-ranking">
                <h3 class="score-board">Scoreboard</h3>
                <div class="table-container">
                    <table class="table" id="end-game-players-ranking-table">
                        <thead>
                            <tr>
                                <th>Ranking</th>
                                <th>Player Name</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody id="end-game-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <button class="page-bottom-button" id="back-to-home">Back To Lobby</button>
    </div>
    <!-- Instruction Page -->
    <div class="page-containter" id="instruction-page">
        <div class="instruction-container">
            <div class="instruction-wrapper">
                <h2 class="instruction-title">Instructions</h2>
                <button class="page-bottom-button" id="instruction-home">Back to Home Page</button>
            </div>
        </div>
        <div class="instruction-text">
            <!-- TODO: type all instructions here -->
            <ul>4 types of things are player, bomb, obstacle, and item</ul>
            <ul>Game rules:</ul>
            <ul>1. Player can place a bomb to destroy an obstacle or another player, and the bomb will explode after a set amount of time, creating an explosion that spreads out in four directions.</ul>
            <ul>2. There are four items that will be randomly dropped after destroying an obstacle which are speed boost, extra life, explosion range increase and bomb increase</ul>
            <ul>3. Player will use the keyboard to control all the movements in the game. </ul>
            <ul>4. Whenever a player stands in the explosion will lose the game (no matter the bomb is placed by oneself or another player).</ul>
        </div>
    </div>
    <!-- Lobby Page -->
    <div class="page-containter" id="lobby-page">
        <div class="lobby-container">
            <button class="page-bottom-button" id="join-player1">Player 1</button>
            <div class="lobby-list-container" id="ranking">
                <h1 class="score-board">Scoreboard</h1>
                <div class="table-container">
                    <table class="table" id="players-ranking-table">
                        <thead>
                            <tr>
                                <th>Ranking</th>
                                <th>Player Name</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody id="table-body">
                        </tbody>
                    </table>
                </div>
                <button class="page-bottom-button" id="join-player2">Player 2</button>
            </div>
        </div>
    </div>
    <script src="/socket.io/socket.io.min.js"></script>
    <script src="scripts/socket.js"></script>
    <script src="scripts/avatar.js"></script>
    <script src="scripts/ui.js"></script>
    <script src="scripts/registration.js"></script>
    <script src="scripts/authentication.js"></script>
    <!-- <script src="Scripts/bounding_obj_box.js"></script> -->
    <script src="game_scripts/bounding_box.js"></script>
    <script src="game_scripts/map_design.js"></script>
    <script src="game_scripts/sprite.js"></script>
    <script src="game_scripts/bomb.js"></script>
    <script src="game_scripts/explosion.js"></script>
    <script src="game_scripts/bomb_utility.js"></script>
    <script src="game_scripts/player.js"></script>
    <script src="game_scripts/wall.js"></script>
    <script src="game_scripts/maps.js"></script>
    <script src="game_scripts/buff.js"></script>
    <script src="game_scripts/game.js"></script>
    <script src="game_scripts/audio.js"></script>
    <script>
        $(document).ready(function() {
            // Initialize the UI
            UI.initialize();

            // Validate the signin
            Authentication.validate(
                () => {
                    // SignInForm.hide();
                    // let user = Authentication.getUser();
                    // $("#user-panel .user-avatar").html(Avatar.getCode(user.avatar));
                    // $("#user-panel .user-name").text(user.name);
                    // $("#signout-button").on("click", () => {
                    //     Authentication.signout(
                    //         () => {
                    //             Socket.disconnect();

                    //             hide();
                    //             SignInForm.show();
                    //         }
                    //     );
                    // });

                    LobbyPage.show();
                    StartPage.hide();
                    Socket.connect();
                    Socket.getLeaderboard();
                    Socket.getCurrentPlayer();
                },
                () => {
                    // SignInForm.show();
                    StartPage.show();
                }
            );
        });
    </script>
</body>

</html>